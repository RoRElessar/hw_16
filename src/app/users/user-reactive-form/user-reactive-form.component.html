<script src="../../../../../hw_14/src/app/rest/users/users.service.ts"></script>
<script src="../../../../../hw_14/src/app/rest/http.service.ts"></script><h1>Reactive form</h1>

<div class="container">
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

    <div class="example-container">

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>First name</mat-label>
          <input matInput
                 type="text"
                 #firstName
                 formControlName="first_name">
        </mat-form-field>
        <app-error [formField]="firstName" [regExp]="nameRegExp"></app-error>
      </div>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Last name</mat-label>
          <input matInput
                 type="text"
                 #lastName
                 formControlName="last_name">
        </mat-form-field>
        <app-error [formField]="lastName" [regExp]="nameRegExp"></app-error>
      </div>
      <br>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>User name</mat-label>
          <input matInput
                 type="text"
                 #userName
                 formControlName="name">
        </mat-form-field>
        <app-error [formField]="userName" [regExp]="nameRegExp"></app-error>
      </div>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Email</mat-label>
          <input matInput
                 type="email"
                 #userEmail
                 formControlName="email">
        </mat-form-field>
        <app-error [formField]="userEmail" [regExp]="emailRegExp"></app-error>
      </div>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Password</mat-label>
          <input matInput
                 type="password"
                 #userPassword
                 formControlName="password">
        </mat-form-field>
        <app-error [formField]="userPassword"></app-error>
      </div>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Confirm password</mat-label>
          <input matInput
                 type="password"
                 #passwordConfirmation
                 formControlName="password_confirmation">
        </mat-form-field>
        <app-error [formField]="passwordConfirmation"></app-error>
      </div>

      <div class="form-group width-50">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Region</mat-label>
          <mat-select >
            <mat-option *ngFor="let region of regions"
                        [value]="region"
                        (click)="setRegionValue(region)">
              {{region}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <input type="hidden" formControlName="region">
      </div>

      <div class="form-group width-50">
        <mat-radio-group aria-label="Select an option"
                         formControlName="sex">
          <mat-radio-button checked
                            value="male">
            Male
          </mat-radio-button>&nbsp;&nbsp;
          <mat-radio-button value="female">
            Female
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <div class="form-group width-100">
        <mat-form-field appearance="fill" class="width-100">
          <mat-label>Additional Information</mat-label>
          <textarea matInput
                    class="height-200"
                    formControlName="additional_information"></textarea>
        </mat-form-field>
      </div>

      <div class="form-group width-100">
        <mat-checkbox checked="checked"
                      formControlName="subscription">
          Subscribe to newsletters
        </mat-checkbox>
      </div>

      <br />
      <br />

      <div class="form-group width-100">
        <button type="button" mat-raised-button (click)="fileInput.click()">Choose File *</button>
        <input hidden
               (change)="onFileChange($event)"
               #fileInput
               type="file"
               formControlName="image">
      </div>

      <br />
      <br />

      <div class="form-group width-100">
        <button mat-raised-button color="primary"
                type="submit">
          Register
        </button>
      </div>

    </div>

  </form>
</div>
